<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CarGrader</title>
  <link rel="icon" href="{{ url_for('static', filename='img/favicon.png') }}">
  <link rel="preload" as="font" href="{{ url_for('static', filename='fonts/Montserrat-SemiBold.woff2') }}" type="font/woff2" crossorigin>
  <link rel="preload" as="font" href="{{ url_for('static', filename='fonts/Lato-Regular.woff2') }}" type="font/woff2" crossorigin>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
  {% include "_header.html" %}
  <!-- === HERO (Primary) === -->
  <section class="hero hero--primary" role="img" aria-label="Car grading made simple">
    <div class="hero__inner hero__grid">
      <!-- Left: text -->
      <div class="hero__text">
        <h1 class="hero__title">
          Find out if your next car is worth it.
        </h1>
        <p class="hero__sub">
          Data-driven reliability ratings and stats for your car. Powered by verified NHTSA data—no opinions, just facts.
        </p>
        <div>
          <a class="btn btn--cta" href="/lookup">Get Started</a>
        </div>
      </div>
  
      <!-- Right: art (car image with fallback to logo) -->
      <div class="hero__art">
        <img
          src="{{ url_for('static', filename='img/hero-car.png') }}"
          onerror="this.src='{{ url_for('static', filename='img/hero-logo.png') }}'"
          alt="CarGrader banner graphic">
      </div>
    </div>
  </section>

<!-- === THREE FEATURE CARDS === -->
<section class="features">
  <div class="features__grid">

    <!-- Card 1 -->
    <article class="card">
      <span class="icon" aria-hidden="true">
        <img src="{{ url_for('static', filename='img/icons/independent.svg') }}" alt="" class="svg-icon">
      </span>
    
      <!-- NEW: wrap text -->
      <div class="card__content">
        <h3>Independent Ratings</h3>
        <p>Every CarGrader score is calculated from verified NHTSA data—not ads, sponsors, or opinions. You get reliability ratings you can trust.</p>
      </div>
    </article>

    <!-- Card 2 -->
    <article class="card">
      <span class="icon" aria-hidden="true">
        <img src="{{ url_for('static', filename='img/icons/smart.svg') }}" alt="" class="svg-icon">
      </span>
    
      <!-- NEW: wrap text -->
      <div class="card__content">
        <h3>Smart Scoring</h3>
        <p>Our scoring system analyzes complaint frequency against age and sales volume to reveal how each vehicle performs in the real world.</p>
      </div>
    </article>

    <!-- Card 3 -->
    <article class="card">
      <span class="icon" aria-hidden="true">
        <img src="{{ url_for('static', filename='img/icons/fast.svg') }}" alt="" class="svg-icon">
      </span>
    
      <!-- NEW: wrap text -->
      <div class="card__content">
        <h3>Fast &amp; Easy</h3>
        <p>Search and compare thousands of cars in seconds. Whether you’re researching your next ride or checking your current one, CarGrader makes it easy.</p>
      </div>
    </article>
  </div>
</section>


  <!-- Page content container starts AFTER the hero -->
  <div class="container">
    <div class="grid" style="margin-top:16px;">
      <div class="panel">
        <div class="controls">
            <div>
              <label for="year">Year</label>
              <select id="year"><option value="">Select...</option></select>
            </div>
          
            <div>
              <label for="make">Make</label>
              <select id="make" disabled><option value="">Select...</option></select>
            </div>
          
            <div>
              <label for="model">Model</label>
              <select id="model" disabled><option value="">Select...</option></select>
            </div>
          
            <!-- Centered, larger CTA -->
            <div>
              <button id="checkBtn" class="btn-get" disabled>Get Results</button>
            </div>
          </div>
        <p id="err" class="err"></p>
        <!-- RESULTS — centered, Canva-style -->
        <section id="resultsSection" class="results hero-centered" hidden>
          <!-- Large white Y/M/M -->
          <h2 id="resultTitle" class="results__title">Year Make Model</h2>
        
          <!-- Normal score UI (wrapped so we can toggle) -->
          <div id="scoreBlock">
            <!-- Purple label -->
            <div class="results__label">Score</div>
        
            <!-- Very large white number -->
            <div id="scoreValue" class="results__value">00</div>
        
            <!-- Purple label same size as "Score" -->
            <div class="results__label">Out of 100</div>
        
            <!-- Certainty line -->
            <div class="results__certainty">
              <button id="certaintyToggle" class="results__certainty-btn" type="button">Certainty</button>
              <span id="certaintyPct" class="results__certainty-pct">0%</span>
            </div>
          </div>
        
          <!-- Blurb from /static/blurbs.json appears here when Certainty is clicked -->
          <div id="certaintyBlurb" class="results__blurb" hidden></div>
        
          <!-- Yellow fallback message -->
          <div id="noDataMsg" class="no-data-message" style="display:none;">
            We don't have enough information yet!
          </div>
        </section>
      </div>

      <!-- Collapsible Boxes with + / - toggles -->
      <section class="box" id="box-details">
        <header class="box__header" data-toggle="#box-details">
            <div class="box__title">Details</div>
            <div class="box__toggle" aria-hidden="true">+</div>
          </header>
          <div class="box__content">
            <p id="detailsText" class="muted">Select a car to see details.</p>
          </div>
        </section>
  
        <section class="box" id="box-top">
          <header class="box__header" data-toggle="#box-top">
            <div class="box__title">Top Complaints</div>
            <div class="box__toggle" aria-hidden="true">+</div>
          </header>
          <div class="box__content">
            {% if not is_logged_in %}
              <div class="gate">
                <p>Login to see more!</p>
                <a class="btn-yellow" href="{{ url_for('auth.login') }}">Login</a>
              </div>
            {% elif not has_pass %}
              <div class="gate">
                <p>Buy a pass to see more!</p>
                <a class="btn-yellow" href="{{ url_for('billing.store') }}">Buy Pass</a>
              </div>
            {% else %}
              <ul id="topList" class="simple"></ul>
            {% endif %}
          </div>
        </section>

      <section class="box" id="box-trims">
        <header class="box__header" data-toggle="#box-trims">
          <div class="box__title">Trims</div>
          <div class="box__toggle" aria-hidden="true">+</div>
        </header>
        <div class="box__content">
          {% if not is_logged_in %}
            <div class="gate">
              <p>Login to see more!</p>
              <a class="btn-yellow" href="{{ url_for('auth.login') }}">Login</a>
            </div>
          {% elif not has_pass %}
            <div class="gate">
              <p>Buy a pass to see more!</p>
              <a class="btn-yellow" href="{{ url_for('billing.store') }}">Buy Pass</a>
            </div>
          {% else %}
            <div class="table-wrap trims-table">
              <table>
                <thead>
                  <tr>
                    <th>Trim/Series</th>
                    <th>Count</th>
                    <th>%</th>
                  </tr>
                </thead>
                <tbody id="trimsTbody"></tbody>
              </table>
            </div>
          {% endif %}
        </div>
      </section>

      <section class="box" id="box-history">
        <header class="box__header" data-toggle="#box-history">
          <div class="box__title">History</div>
          <div class="box__toggle" aria-hidden="true">+</div>
        </header>
        <div class="box__content">
          {% if not is_logged_in %}
            <div class="gate">
              <p>Login to see more!</p>
              <a class="btn-yellow" href="{{ url_for('auth.login') }}">Login</a>
            </div>
          {% elif not has_pass %}
            <div class="gate">
              <p>Buy a pass to see more!</p>
              <a class="btn-yellow" href="{{ url_for('billing.store') }}">Buy Pass</a>
            </div>
          {% else %}
            <canvas id="historyChart" class="history-canvas"></canvas>
            <div class="badge" id="historyNote" style="display:none; margin-top:8px;"></div>
          {% endif %}
        </div>
      </section>
    </div>
  </div>
    {% include "_footer.html" %}
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
