<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CarGrader</title>
  <link rel="icon" href="{{ url_for('static', filename='img/favicon.png') }}">
  <link rel="preload" as="font" href="{{ url_for('static', filename='fonts/Fredoka-SemiBold.ttf') }}" type="font/ttf" crossorigin>
  <link rel="preload" as="font" href="{{ url_for('static', filename='fonts/OpenSans-Regular.ttf') }}" type="font/ttf" crossorigin>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
  {% include "_header.html" %}
  <!-- Full-bleed HERO (replaces the old .topbar + .banner) -->
  <section class="hero" role="img" aria-label="Hero banner">
    <div class="hero__overlay"></div>
    <div class="hero__inner">
      <h1 class="hero__brand">CarGrader</h1>
        {% if mission_text %}
          <div class="hero__mission">
            {% for line in mission_text.splitlines() if line.strip() %}
              <div class="hero__mission-line">{{ line }}</div>
            {% endfor %}
          </div>
        {% endif %}
    </div>
  </section>

  <!-- Page content container starts AFTER the hero -->
  <div class="container">
    <div class="grid" style="margin-top:16px;">
      <div class="panel">
        <div class="controls">
            <div>
              <label for="year">Year</label>
              <select id="year"><option value="">Select...</option></select>
            </div>
          
            <div>
              <label for="make">Make</label>
              <select id="make" disabled><option value="">Select...</option></select>
            </div>
          
            <div>
              <label for="model">Model</label>
              <select id="model" disabled><option value="">Select...</option></select>
            </div>
          
            <!-- Centered, larger CTA -->
            <div>
              <button id="checkBtn" class="btn-get" disabled>Get Results</button>
            </div>
          </div>
        <p id="err" class="err"></p>
        <!-- RESULTS â€” centered, Canva-style -->
        <section id="resultsSection" class="results hero-centered" hidden>
          <!-- Large white Y/M/M -->
          <h2 id="resultTitle" class="results__title">Year Make Model</h2>
        
          <!-- Normal score UI (wrapped so we can toggle) -->
          <div id="scoreBlock">
            <!-- Purple label -->
            <div class="results__label">Score</div>
        
            <!-- Very large white number -->
            <div id="scoreValue" class="results__value">00</div>
        
            <!-- Purple label same size as "Score" -->
            <div class="results__label">Out of 100</div>
        
            <!-- Certainty line -->
            <div class="results__certainty">
              <button id="certaintyToggle" class="results__certainty-btn" type="button">Certainty</button>
              <span id="certaintyPct" class="results__certainty-pct">0%</span>
            </div>
          </div>
        
          <!-- Blurb from /static/blurbs.json appears here when Certainty is clicked -->
          <div id="certaintyBlurb" class="results__blurb" hidden></div>
        
          <!-- Yellow fallback message -->
          <div id="noDataMsg" class="no-data-message" style="display:none;">
            We don't have enough information yet!
          </div>
        </section>
      </div>

      <!-- Collapsible Boxes with + / - toggles -->
      <section class="box" id="box-details">
        <header class="box__header" data-toggle="#box-details">
            <div class="box__title">Details</div>
            <div class="box__toggle" aria-hidden="true">+</div>
          </header>
          <div class="box__content">
            <p id="detailsText" class="muted">Select a car to see details.</p>
          </div>
        </section>
  
        <section class="box" id="box-top">
          <header class="box__header" data-toggle="#box-top">
            <div class="box__title">Top Complaints</div>
            <div class="box__toggle" aria-hidden="true">+</div>
          </header>
          <div class="box__content">
            {% if not is_logged_in %}
              <div class="gate">
                <p>Login to see more!</p>
                <a class="btn-yellow" href="{{ url_for('auth.login') }}">Login</a>
              </div>
            {% elif not has_pass %}
              <div class="gate">
                <p>Buy a pass to see more!</p>
                <a class="btn-yellow" href="{{ url_for('billing.store') }}">Buy Pass</a>
              </div>
            {% else %}
              <ul id="topList" class="simple"></ul>
            {% endif %}
          </div>
        </section>

      <section class="box" id="box-trims">
        <header class="box__header" data-toggle="#box-trims">
          <div class="box__title">Trims</div>
          <div class="box__toggle" aria-hidden="true">+</div>
        </header>
        <div class="box__content">
          {% if not is_logged_in %}
            <div class="gate">
              <p>Login to see more!</p>
              <a class="btn-yellow" href="{{ url_for('auth.login') }}">Login</a>
            </div>
          {% elif not has_pass %}
            <div class="gate">
              <p>Buy a pass to see more!</p>
              <a class="btn-yellow" href="{{ url_for('billing.store') }}">Buy Pass</a>
            </div>
          {% else %}
            <div class="table-wrap trims-table">
              <table>
                <thead>
                  <tr>
                    <th>Trim/Series</th>
                    <th>Count</th>
                    <th>%</th>
                  </tr>
                </thead>
                <tbody id="trimsTbody"></tbody>
              </table>
            </div>
          {% endif %}
        </div>
      </section>

      <section class="box" id="box-history">
        <header class="box__header" data-toggle="#box-history">
          <div class="box__title">History</div>
          <div class="box__toggle" aria-hidden="true">+</div>
        </header>
        <div class="box__content">
          {% if not is_logged_in %}
            <div class="gate">
              <p>Login to see more!</p>
              <a class="btn-yellow" href="{{ url_for('auth.login') }}">Login</a>
            </div>
          {% elif not has_pass %}
            <div class="gate">
              <p>Buy a pass to see more!</p>
              <a class="btn-yellow" href="{{ url_for('billing.store') }}">Buy Pass</a>
            </div>
          {% else %}
            <canvas id="historyChart" class="history-canvas"></canvas>
            <div class="badge" id="historyNote" style="display:none; margin-top:8px;"></div>
          {% endif %}
        </div>
      </section>

      <div style="text-align:center; margin-top:16px;">
        <a href="{{ url_for('public.filtered_lookup') }}" class="btn-yellow px-5 py-2 rounded-full text-black font-semibold">
          Filtered Lookup
        </a>
      </div>
    </div>
  </div>
    <footer class="site-footer">
    <div class="footer-links">
      <button id="btnDisclaimer" class="results__certainty-btn footer-btn" type="button">
        Disclaimer
      </button>
      <button id="btnTerms" class="results__certainty-btn footer-btn" type="button">
        Terms and Conditions
      </button>
      <button id="btnPrivacy" class="results__certainty-btn footer-btn" type="button">
        Privacy Policy
      </button>
    </div>
  </footer>
  <!-- ðŸ‘‡ spacer div for empty space -->
  <div style="height: 80px;"></div>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>

























