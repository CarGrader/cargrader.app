<header class="site-header">
  <div class="container header-inner">
    <!-- Left side -->
    <div class="left">
      <button id="menu-btn" class="btn header-btn" type="button" aria-expanded="false" aria-controls="menu-panel">
        <svg aria-hidden="true" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
          <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span>Menu</span>
      </button>
    </div>

    <!-- Right side -->
    <div class="right">
      {% if session.get('user') %}
        <a class="btn header-btn" href="{{ url_for('auth.logout') }}">Logout</a>
      {% else %}
        <a class="btn header-btn" href="{{ url_for('auth.login') }}">Create Account / Login</a>
      {% endif %}
    </div>
  </div>

  <!-- Collapsible Menu -->
  <nav id="menu-panel" class="menu-panel is-hidden" aria-hidden="true">
    <ul>
      <li><a href="{{ url_for('main.index') }}">Home</a></li>
      <li><a href="{{ url_for('account.account') }}">Account</a></li>
      <li><a href="{{ url_for('store.index') }}">Store</a></li>
      <li><a href="{{ url_for('main.about') }}">About</a></li>
      <!-- Add FAQ later if needed -->
    </ul>
  </nav>
</header>

<script>
(function () {
  const menuBtn   = document.getElementById('menu-btn');
  const menuPanel = document.getElementById('menu-panel');
  if (!menuBtn || !menuPanel) return;

  function setOpen(open) {
    menuPanel.classList.toggle('is-hidden', !open);
    menuBtn.setAttribute('aria-expanded', String(open));
    menuPanel.setAttribute('aria-hidden', String(!open));
  }

  // Start closed
  setOpen(false);

  menuBtn.addEventListener('click', () => {
    const open = menuPanel.classList.contains('is-hidden');
    setOpen(open);
  });

  // Optional: close when clicking outside
  document.addEventListener('click', (e) => {
    if (!menuPanel.contains(e.target) && !menuBtn.contains(e.target)) {
      setOpen(false);
    }
  });
})();
</script>
